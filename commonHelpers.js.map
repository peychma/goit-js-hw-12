{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst baseUrl = \"https://pixabay.com\";\nconst endPoint = \"api/\";\nconst apiKey = \"41917701-79d925887e26991e7dbaf3a79\";\nconst galleryForm = document.querySelector(\".gallery-form\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst massege = document.querySelector(\".massege\");\nconst buttonLoad = document.querySelector(\".button-load\");\nlet page = 1;\nconst per_page = 40;\nlet searchText = \"\";\n\ngalleryForm.addEventListener(\"submit\", function (event) {\n    event.preventDefault();\n    const {name} = galleryForm.elements;\n    searchText = name.value.trim();\n    loader.style.display = \"block\";\n    if (!searchText) {\n          iziToast.error({\n                title: \"Error\",\n                message: \"Please fill search string before submitting.\",\n            });\n    }\n    else if (name.value.length < 3) {\n          iziToast.error({\n                title: \"Error\",\n                message: \"Search string must be not less then 3 symbols.\",\n            });\n    }\n\n    searchImages(searchText, 1);\n    galleryForm.reset();\n    return;\n});\nasync function searchImages(query, page) {\n    const encodedQuery = encodeURIComponent(query);\n    const url = `${baseUrl}/${endPoint}?key=${apiKey}&q=${encodedQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${per_page}&page=${page}`;\n    console.log(url);\n    try {\n      const response = await axios.get(url);\n      const data = response.data;\n      console.log(data);\n        loader.style.display = \"none\";\n        buttonLoad.style.display = \"none\";\n        massege.style.display = \"none\";\n        if (data.hits && data.hits.length > 0) {\n            if (data.totalHits > (page * per_page)) {\n                buttonLoad.style.display = \"block\";\n            } else {\n                massege.style.display = \"block\";\n            }\n            showImages(data.hits);\n            const cardHeight = document.querySelector(\".gallery-item\").getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        } else {\n            gallery.innerHTML = \"\";\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n        }\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    }\n}\nfunction showImages(images) {\n    gallery.innerHTML = \"\";\n    const galleryHTML = images.map(image => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n    <p>Likes: ${image.likes}</p>\n    <p>Views: ${image.views}</p>\n    <p>Comments: ${image.comments}</p>\n    <p>Downloads: ${image.downloads}</p>\n    </li>`\n    ).join(\"\");\n    gallery.innerHTML = galleryHTML;\n    const lightbox = new SimpleLightbox(\".gallery a\", {\n        animationSpeed: 250,\n        captionsData: \"alt\",\n        captionDelay: 250\n    });\n    lightbox.refresh();\n}\nbuttonLoad.addEventListener(\"click\", function() {\n    console.log(111);\n    loader.style.display = \"block\";\n    page = page + 1;\n    searchImages(searchText, page);\n    return;\n});"],"names":["baseUrl","endPoint","apiKey","galleryForm","loader","gallery","massege","buttonLoad","page","per_page","searchText","event","name","iziToast","searchImages","query","encodedQuery","url","data","axios","showImages","cardHeight","error","images","galleryHTML","image","SimpleLightbox"],"mappings":"owBAKA,MAAMA,EAAU,sBACVC,EAAW,OACXC,EAAS,qCACTC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,cAAc,EACxD,IAAIC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIC,EAAa,GAEjBP,EAAY,iBAAiB,SAAU,SAAUQ,EAAO,CACpDA,EAAM,eAAc,EACpB,KAAM,CAAC,KAAAC,CAAI,EAAIT,EAAY,SAC3BO,EAAaE,EAAK,MAAM,OACxBR,EAAO,MAAM,QAAU,QAClBM,EAMIE,EAAK,MAAM,OAAS,GACvBC,EAAS,MAAM,CACT,MAAO,QACP,QAAS,gDACzB,CAAa,EATHA,EAAS,MAAM,CACT,MAAO,QACP,QAAS,8CACzB,CAAa,EASTC,EAAaJ,EAAY,CAAC,EAC1BP,EAAY,MAAK,CAErB,CAAC,EACD,eAAeW,EAAaC,EAAOP,EAAM,CACrC,MAAMQ,EAAe,mBAAmBD,CAAK,EACvCE,EAAM,GAAGjB,KAAWC,SAAgBC,OAAYc,sEAAiFP,UAAiBD,IACxJ,QAAQ,IAAIS,CAAG,EACf,GAAI,CAEF,MAAMC,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAKpB,GAJF,QAAQ,IAAIC,CAAI,EACdd,EAAO,MAAM,QAAU,OACvBG,EAAW,MAAM,QAAU,OAC3BD,EAAQ,MAAM,QAAU,OACpBY,EAAK,MAAQA,EAAK,KAAK,OAAS,EAAG,CAC/BA,EAAK,UAAaV,EAAOC,EACzBF,EAAW,MAAM,QAAU,QAE3BD,EAAQ,MAAM,QAAU,QAE5Bc,EAAWF,EAAK,IAAI,EACpB,MAAMG,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OACnF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAC1B,CAAa,CACb,MACYhB,EAAQ,UAAY,GACpBQ,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACzB,CAAa,CAEV,OAAQS,EAAP,CACA,QAAQ,MAAM,yBAA0BA,CAAK,CAC5C,CACL,CACA,SAASF,EAAWG,EAAQ,CACxBlB,EAAQ,UAAY,GACpB,MAAMmB,EAAcD,EAAO,IAAIE,GAAS;AAAA,sCACNA,EAAM;AAAA,0CACFA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,gBAE5DA,EAAM;AAAA,gBACNA,EAAM;AAAA,mBACHA,EAAM;AAAA,oBACLA,EAAM;AAAA,UAE1B,EAAM,KAAK,EAAE,EACTpB,EAAQ,UAAYmB,EACH,IAAIE,EAAe,aAAc,CAC9C,eAAgB,IAChB,aAAc,MACd,aAAc,GACtB,CAAK,EACQ,QAAO,CACpB,CACAnB,EAAW,iBAAiB,QAAS,UAAW,CAC5C,QAAQ,IAAI,GAAG,EACfH,EAAO,MAAM,QAAU,QACvBI,EAAOA,EAAO,EACdM,EAAaJ,EAAYF,CAAI,CAEjC,CAAC"}